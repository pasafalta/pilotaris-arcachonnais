<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Bootstrap Core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="css/agency.css" rel="stylesheet">
        <link href="css/box_news.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

        <!-- AgularJS -->
        <script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.5.2/angular.min.js"></script>

        <!-- jQuery -->
        <script src="js/jquery.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="js/bootstrap.min.js"></script>

        <!-- Plugin JavaScript -->
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
        <script src="js/classie.js"></script>
        <script src="js/cbpAnimatedHeader.js"></script>

        <!-- Contact Form JavaScript -->
        <script src="js/jqBootstrapValidation.js"></script>
        <script src="js/contact_me.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="js/agency.js"></script>
        <script src="js/box_news.js"></script>

        <!-- Fixation menu top JavaScript -->
        <script src="js/menu_top.min.js"></script>

        <!-- Presentation -->
        <script src="js/jquery.easytabs.min.js"></script>

        <!-- Initialisation des tooltip bootstrap -->
        <script>
            $(function () {
                $('[data-toggle="tooltip"]').tooltip()
            })
        </script>

        <title>Pilotaris Arcachonnais - News</title>
    </head>

    <body id="page-top" class="index">
        <div class="social-test">
            <ul class="list-inline social-buttons site">
                <li><a href="index.html#sport"><i class="fa fa-arrow-left"></i></a>
                </li>
            </ul>
            <ul class="list-inline social-buttons facebook hidden-sm hidden-xs">
                <li><a target="_blank" href="https://www.facebook.com/Pilotaris-Arcachonnais-231975900198313/"><i class="fa fa-facebook"></i></a>
                </li>
            </ul>
            <ul class="list-inline social-buttons email hidden-sm hidden-xs">
                <li><a href="mailto:pilotaris.arcachon@orange.fr"><i class="fa fa-envelope-o"></i></a>
                </li>
            </ul>
            <ul class="list-inline social-buttons map hidden-sm hidden-xs">
                <li><a target="_blank" href="https://www.google.fr/maps/place/Pilotaris+Arcachonnais/@44.6508942,-1.1917555,17z/data=!3m1!4b1!4m2!3m1!1s0xd549e49148fea5f:0x3accf01993b042c6"><i class="fa fa-location-arrow"></i></a>
                </li>
            </ul>
        </div>
        <!-- Header -->
        <header>
            <!-- Barre de menus -->
            <nav class="navbar navbar-default navbar-static-top" id="navbar-news" style="padding:0px">
                <div class="container">
                    <div class="navbar-header">
                        <a class="navbar-brand title">Pilotaris Arcachonnais <p class="under-title">Actualit√©s sportives</p></a>
                    </div>
                    <!--div class="collapse navbar-collapse navbar-right">
<ul class="nav navbar-nav historique">
<li class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Historique <span class="caret"></span></a>
<ul class="dropdown-menu">
<li><a href="#">2015</a></li>
<li><a href="#">2014</a></li>
</ul>
</li>
</ul>
</div-->
                </div>
            </nav>
        </header>
        <div ng-app = "mainApp" ng-controller = "newsController">
            <div class="content">
                <div class="wrap">
                    <div id="main" role="main" style="height: 3208px;">
                        <ul id="tiles">
                            <div ng-include = "'models/news_box.html'"></div>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var mainApp = angular.module("mainApp", []);
            
            mainApp.directive('repeatDone', function() {
                return function(scope, element, attrs) {
                    if (scope.$last) setTimeout(function() {
                        scope.$emit('onRepeatLast', element, attrs);
                    }, 1);
                };
            });
            
            mainApp.factory("padService", function () {
                //Store service status here
                var status = "none-yet";

                function setStatus(s) {
                    status = s;
                    return status;
                };

                function getStatus() {
                    return status;
                };

                return {
                    setStatus: setStatus,
                    getStatus: getStatus
                };
            });

            mainApp.directive("widget", function() {
                function widgetController($scope, padService) {
                    //subscribe with $watch
                    $scope.$watch(padService.getStatus, function(newStatus) {
                        //catch-up and react to changes
                        case (newStatus) {  
                        "authenticated":
                        // Do stuff related to authenticated state
                        console.log("authenticated status");
                        "ready":
                        // Do stuff related to pad ready state
                        console.log("ready status");
                        "error":
                        // Do stuff related to error state
                        console.log("error status");
                        default:
                        break;
                        }
                                  $scope.message = newStatus;
                                  };
                                  };
                                  
              return {
              restrict: 'E',
              controller: widgetController
              }
              });
            
            mainApp.controller('newsController', function($scope, $http) {
                var url = "data/news/2016.txt";

                $http.get(url).success( function(response) {
                    $scope.news = response;
                    $scope.quantity = 6;
                });
                
                $scope.$on('onRepeatLast', function(scope, element, attrs){
                    console.log("Organisation des posts onRepeatLast");
                    organisation_posts();
                });
            });
        </script>

        <a id="scroll-to-top">
            <i class="fa fa-caret-up"></i>
        </a>  

    </body>

</html>